# Stoat Editor Default Keymap Configuration
#
# This file defines all key bindings for the Stoat editor, organized by mode.
# Each binding specifies a key, the action to execute, and the context where it applies.

# Key Contexts - Define default mode for each UI context
# When entering a context via SetKeyContext, the mode is set to default_mode
[[contexts]]
name = "TextEditor"
default_mode = "normal"

[[contexts]]
name = "Git"
default_mode = "git_status"

[[contexts]]
name = "FileFinder"
default_mode = "file_finder"

[[contexts]]
name = "CommandPalette"
default_mode = "command_palette"

[[contexts]]
name = "BufferFinder"
default_mode = "buffer_finder"

[[contexts]]
name = "DiffReview"
default_mode = "diff_review"

[[contexts]]
name = "HelpModal"
default_mode = "help_modal"

[[contexts]]
name = "AboutModal"
default_mode = "about_modal"

# Editor Modes
[[modes]]
name = "normal"
display_name = "NORMAL"

[[modes]]
name = "insert"
display_name = "INSERT"

[[modes]]
name = "visual"
display_name = "VISUAL"
anchored_selection = true

[[modes]]
name = "pane"
display_name = "PANE"

[[modes]]
name = "file_finder"
display_name = "FILE FINDER"
previous = "normal"

[[modes]]
name = "buffer_finder"
display_name = "BUFFER FINDER"
previous = "normal"

[[modes]]
name = "space"
display_name = "SPACE"

[[modes]]
name = "command_palette"
display_name = "COMMAND"
previous = "normal"

[[modes]]
name = "git_status"
display_name = "GIT STATUS"
previous = "normal"

[[modes]]
name = "git_filter"
display_name = "GIT FILTER"
previous = "git_status"

[[modes]]
name = "diff_review"
display_name = "DIFF REVIEW"
previous = "normal"

[[modes]]
name = "help_modal"
display_name = "HELP"
previous = "normal"

[[modes]]
name = "about_modal"
display_name = "ABOUT"
previous = "normal"

# Normal Mode - Vim-style navigation and commands
[[bindings]]
key = "h"
action = "MoveLeft"
context = "TextEditor && mode == normal"

[[bindings]]
key = "j"
action = "MoveDown"
context = "TextEditor && mode == normal"

[[bindings]]
key = "k"
action = "MoveUp"
context = "TextEditor && mode == normal"

[[bindings]]
key = "l"
action = "MoveRight"
context = "TextEditor && mode == normal"

[[bindings]]
key = "w"
action = "SelectNextSymbol"
context = "TextEditor && mode == normal"

[[bindings]]
key = "b"
action = "SelectPrevSymbol"
context = "TextEditor && mode == normal"

[[bindings]]
key = "W"
action = "SelectNextToken"
context = "TextEditor && mode == normal"

[[bindings]]
key = "B"
action = "SelectPrevToken"
context = "TextEditor && mode == normal"

[[bindings]]
key = "0"
action = "MoveToLineStart"
context = "TextEditor && mode == normal"

[[bindings]]
key = "$"
action = "MoveToLineEnd"
context = "TextEditor && mode == normal"

[[bindings]]
key = "g g"
action = "MoveToFileStart"
context = "TextEditor && mode == normal"

[[bindings]]
key = "G"
action = "MoveToFileEnd"
context = "TextEditor && mode == normal"

[[bindings]]
key = "ctrl-b"
action = "PageUp"
context = "TextEditor && mode == normal"

[[bindings]]
key = "ctrl-f"
action = "PageDown"
context = "TextEditor && mode == normal"

[[bindings]]
key = "ctrl-b"
action = "PageUp"
context = "TextEditor && mode == normal"

[[bindings]]
key = "ctrl-f"
action = "PageDown"
context = "TextEditor && mode == normal"

[[bindings]]
key = "pageup"
action = "PageUp"
context = "TextEditor && mode == normal"

[[bindings]]
key = "pagedown"
action = "PageDown"
context = "TextEditor && mode == normal"

# Mode transitions
[[bindings]]
key = "i"
action = "SetMode(insert)"
context = "TextEditor && mode == normal"

[[bindings]]
key = "v"
action = "SetMode(visual)"
context = "TextEditor && mode == normal"

[[bindings]]
key = "escape"
action = "SetMode(normal)"
context = "TextEditor && mode == insert"

[[bindings]]
key = "escape"
action = "SetMode(normal)"
context = "TextEditor && mode == visual"

[[bindings]]
key = "escape"
action = "SetMode(normal)"
context = "TextEditor && mode == pane"

[[bindings]]
key = "space"
action = "SetMode(space)"
context = "TextEditor && mode == normal"

# Editing in normal mode
[[bindings]]
key = "x"
action = "DeleteRight"
context = "TextEditor && mode == normal"

[[bindings]]
key = "shift-x"
action = "DeleteLeft"
context = "TextEditor && mode == normal"

[[bindings]]
key = "d d"
action = "DeleteLine"
context = "TextEditor && mode == normal"

[[bindings]]
key = "D"
action = "DeleteToEndOfLine"
context = "TextEditor && mode == normal"

# Undo/redo in normal mode
[[bindings]]
key = "u"
action = "Undo"
context = "TextEditor && mode == normal"

[[bindings]]
key = "ctrl-r"
action = "Redo"
context = "TextEditor && mode == normal"

# File operations in normal mode
[[bindings]]
key = "cmd-s"
action = "Save"
context = "TextEditor && mode == normal"

[[bindings]]
key = "ctrl-s"
action = "Save"
context = "TextEditor && mode == normal"

# Git diff hunks in normal mode
[[bindings]]
key = "] h"
action = "GotoNextHunk"
context = "TextEditor && mode == normal"

[[bindings]]
key = "[ h"
action = "GotoPrevHunk"
context = "TextEditor && mode == normal"

# Insert Mode - Standard text editing
[[bindings]]
key = "left"
action = "MoveLeft"
context = "TextEditor && mode == insert"

[[bindings]]
key = "right"
action = "MoveRight"
context = "TextEditor && mode == insert"

[[bindings]]
key = "up"
action = "MoveUp"
context = "TextEditor && mode == insert"

[[bindings]]
key = "down"
action = "MoveDown"
context = "TextEditor && mode == insert"

[[bindings]]
key = "alt-left"
action = "MoveWordLeft"
context = "TextEditor && mode == insert"

[[bindings]]
key = "alt-right"
action = "MoveWordRight"
context = "TextEditor && mode == insert"

[[bindings]]
key = "cmd-left"
action = "MoveToLineStart"
context = "TextEditor && mode == insert"

[[bindings]]
key = "cmd-right"
action = "MoveToLineEnd"
context = "TextEditor && mode == insert"

[[bindings]]
key = "ctrl-a"
action = "MoveToLineStart"
context = "TextEditor && mode == insert"

[[bindings]]
key = "ctrl-e"
action = "MoveToLineEnd"
context = "TextEditor && mode == insert"

# Deletion in insert mode
[[bindings]]
key = "backspace"
action = "DeleteLeft"
context = "TextEditor && mode == insert"

[[bindings]]
key = "delete"
action = "DeleteRight"
context = "TextEditor && mode == insert"

[[bindings]]
key = "alt-backspace"
action = "DeleteWordLeft"
context = "TextEditor && mode == insert"

[[bindings]]
key = "alt-delete"
action = "DeleteWordRight"
context = "TextEditor && mode == insert"

[[bindings]]
key = "enter"
action = "NewLine"
context = "TextEditor && mode == insert"

# File operations in insert mode
[[bindings]]
key = "cmd-s"
action = "Save"
context = "TextEditor && mode == insert"

[[bindings]]
key = "ctrl-s"
action = "Save"
context = "TextEditor && mode == insert"

# Undo/redo in insert mode
[[bindings]]
key = "cmd-z"
action = "Undo"
context = "TextEditor && mode == insert"

[[bindings]]
key = "ctrl-z"
action = "Undo"
context = "TextEditor && mode == insert"

[[bindings]]
key = "cmd-shift-z"
action = "Redo"
context = "TextEditor && mode == insert"

[[bindings]]
key = "ctrl-shift-z"
action = "Redo"
context = "TextEditor && mode == insert"

# Clipboard operations (global)
[[bindings]]
key = "cmd-c"
action = "Copy"
context = "TextEditor"

[[bindings]]
key = "ctrl-c"
action = "Copy"
context = "TextEditor"

[[bindings]]
key = "cmd-x"
action = "Cut"
context = "TextEditor"

[[bindings]]
key = "ctrl-x"
action = "Cut"
context = "TextEditor"

[[bindings]]
key = "cmd-v"
action = "Paste"
context = "TextEditor"

[[bindings]]
key = "ctrl-v"
action = "Paste"
context = "TextEditor"

# Visual Mode - Selection operations
[[bindings]]
key = "h"
action = "SelectLeft"
context = "TextEditor && mode == visual"

[[bindings]]
key = "j"
action = "SelectDown"
context = "TextEditor && mode == visual"

[[bindings]]
key = "k"
action = "SelectUp"
context = "TextEditor && mode == visual"

[[bindings]]
key = "l"
action = "SelectRight"
context = "TextEditor && mode == visual"

[[bindings]]
key = "left"
action = "SelectLeft"
context = "TextEditor && mode == visual"

[[bindings]]
key = "right"
action = "SelectRight"
context = "TextEditor && mode == visual"

[[bindings]]
key = "up"
action = "SelectUp"
context = "TextEditor && mode == visual"

[[bindings]]
key = "down"
action = "SelectDown"
context = "TextEditor && mode == visual"

[[bindings]]
key = "w"
action = "SelectNextSymbol"
context = "TextEditor && mode == visual"

[[bindings]]
key = "b"
action = "SelectPrevSymbol"
context = "TextEditor && mode == visual"

[[bindings]]
key = "W"
action = "SelectNextToken"
context = "TextEditor && mode == visual"

[[bindings]]
key = "B"
action = "SelectPrevToken"
context = "TextEditor && mode == visual"

[[bindings]]
key = "0"
action = "SelectToLineStart"
context = "TextEditor && mode == visual"

[[bindings]]
key = "$"
action = "SelectToLineEnd"
context = "TextEditor && mode == visual"

[[bindings]]
key = "y"
action = "Copy"
context = "TextEditor && mode == visual"

[[bindings]]
key = "d"
action = "Cut"
context = "TextEditor && mode == visual"

[[bindings]]
key = "x"
action = "Cut"
context = "TextEditor && mode == visual"

# Global bindings
[[bindings]]
key = "cmd-a"
action = "SelectAll"
context = "TextEditor"

[[bindings]]
key = "ctrl-a"
action = "SelectAll"
context = "TextEditor && mode != insert"

[[bindings]]
key = "cmd-q"
action = "Quit"
context = "TextEditor"

[[bindings]]
key = "ctrl-q"
action = "Quit"
context = "TextEditor"

[[bindings]]
key = "cmd-o"
action = "Open"
context = "TextEditor"

[[bindings]]
key = "ctrl-o"
action = "Open"
context = "TextEditor"

[[bindings]]
key = "tab"
action = "Indent"
context = "TextEditor"

[[bindings]]
key = "shift-tab"
action = "Outdent"
context = "TextEditor"

# Pane Mode - Window management
[[bindings]]
key = "v"
action = "SplitDown"
context = "TextEditor && mode == pane"

[[bindings]]
key = "s"
action = "SplitRight"
context = "TextEditor && mode == pane"

[[bindings]]
key = "ctrl-v"
action = "SplitRight"
context = "TextEditor && mode == pane"

[[bindings]]
key = "ctrl-s"
action = "SplitDown"
context = "TextEditor && mode == pane"

[[bindings]]
key = "q"
action = "ClosePane"
context = "TextEditor && mode == pane"

[[bindings]]
key = "h"
action = "FocusPaneLeft"
context = "TextEditor && mode == pane"

[[bindings]]
key = "j"
action = "FocusPaneDown"
context = "TextEditor && mode == pane"

[[bindings]]
key = "k"
action = "FocusPaneUp"
context = "TextEditor && mode == pane"

[[bindings]]
key = "l"
action = "FocusPaneRight"
context = "TextEditor && mode == pane"

[[bindings]]
key = "ctrl-h"
action = "FocusPaneLeft"
context = "TextEditor && mode == pane"

[[bindings]]
key = "ctrl-j"
action = "FocusPaneDown"
context = "TextEditor && mode == pane"

[[bindings]]
key = "ctrl-k"
action = "FocusPaneUp"
context = "TextEditor && mode == pane"

[[bindings]]
key = "ctrl-l"
action = "FocusPaneRight"
context = "TextEditor && mode == pane"

# File Finder Mode - Quick file navigation
[[bindings]]
key = "escape"
action = "SetKeyContext(TextEditor)"
context = "FileFinder"

[[bindings]]
key = "up"
action = "FileFinderPrev"
context = "FileFinder"

[[bindings]]
key = "down"
action = "FileFinderNext"
context = "FileFinder"

[[bindings]]
key = "ctrl-p"
action = "FileFinderPrev"
context = "FileFinder"

[[bindings]]
key = "ctrl-n"
action = "FileFinderNext"
context = "FileFinder"

[[bindings]]
key = "backspace"
action = "DeleteLeft"
context = "FileFinder"

[[bindings]]
key = "enter"
action = "FileFinderSelect"
context = "FileFinder"

# Buffer Finder Mode - Quick buffer switching
[[bindings]]
key = "escape"
action = "SetKeyContext(TextEditor)"
context = "BufferFinder"

[[bindings]]
key = "up"
action = "BufferFinderPrev"
context = "BufferFinder"

[[bindings]]
key = "down"
action = "BufferFinderNext"
context = "BufferFinder"

[[bindings]]
key = "ctrl-p"
action = "BufferFinderPrev"
context = "BufferFinder"

[[bindings]]
key = "ctrl-n"
action = "BufferFinderNext"
context = "BufferFinder"

[[bindings]]
key = "backspace"
action = "DeleteLeft"
context = "BufferFinder"

[[bindings]]
key = "enter"
action = "BufferFinderSelect"
context = "BufferFinder"

# Space Mode - Leader key for commands
[[bindings]]
key = "a"
action = "SetMode(pane)"
context = "TextEditor && mode == space"

[[bindings]]
key = "p"
action = "OpenFileFinder"
context = "TextEditor && mode == space"

[[bindings]]
key = "b"
action = "OpenBufferFinder"
context = "TextEditor && mode == space"

[[bindings]]
key = "g"
action = "OpenGitStatus"
context = "TextEditor && mode == space"

[[bindings]]
key = "d"
action = "ToggleDiffHunk"
context = "TextEditor && mode == space"

[[bindings]]
key = "r"
action = "OpenDiffReview"
context = "TextEditor && mode == space"

[[bindings]]
key = "escape"
action = "SetMode(normal)"
context = "TextEditor && mode == space"

# Command Palette Mode - Fuzzy command search
[[bindings]]
key = ":"
action = "OpenCommandPalette"
context = "TextEditor && mode == normal"

[[bindings]]
key = "escape"
action = "SetKeyContext(TextEditor)"
context = "CommandPalette"

[[bindings]]
key = "up"
action = "CommandPalettePrev"
context = "CommandPalette"

[[bindings]]
key = "down"
action = "CommandPaletteNext"
context = "CommandPalette"

[[bindings]]
key = "ctrl-p"
action = "CommandPalettePrev"
context = "CommandPalette"

[[bindings]]
key = "ctrl-n"
action = "CommandPaletteNext"
context = "CommandPalette"

[[bindings]]
key = "enter"
action = "CommandPaletteExecute"
context = "CommandPalette"

[[bindings]]
key = "backspace"
action = "DeleteLeft"
context = "CommandPalette"

[[bindings]]
key = "ctrl-h"
action = "ToggleCommandPaletteHidden"
context = "CommandPalette"

# Git Status Mode - View modified files
[[bindings]]
key = "escape"
action = "SetKeyContext(TextEditor)"
context = "Git && mode == git_status"

[[bindings]]
key = "j"
action = "GitStatusNext"
context = "Git && mode == git_status"

[[bindings]]
key = "k"
action = "GitStatusPrev"
context = "Git && mode == git_status"

[[bindings]]
key = "down"
action = "GitStatusNext"
context = "Git && mode == git_status"

[[bindings]]
key = "up"
action = "GitStatusPrev"
context = "Git && mode == git_status"

[[bindings]]
key = "ctrl-n"
action = "GitStatusNext"
context = "Git && mode == git_status"

[[bindings]]
key = "ctrl-p"
action = "GitStatusPrev"
context = "Git && mode == git_status"

[[bindings]]
key = "enter"
action = "GitStatusSelect"
context = "Git && mode == git_status"

[[bindings]]
key = "f"
action = "SetMode(git_filter)"
context = "Git && mode == git_status"

# Git Filter Mode - Quick filter selection
[[bindings]]
key = "a"
action = "GitStatusSetFilterAll"
context = "Git && mode == git_filter"

[[bindings]]
key = "s"
action = "GitStatusSetFilterStaged"
context = "Git && mode == git_filter"

[[bindings]]
key = "u"
action = "GitStatusSetFilterUnstaged"
context = "Git && mode == git_filter"

[[bindings]]
key = "w"
action = "GitStatusSetFilterUnstagedWithUntracked"
context = "Git && mode == git_filter"

[[bindings]]
key = "t"
action = "GitStatusSetFilterUntracked"
context = "Git && mode == git_filter"

[[bindings]]
key = "escape"
action = "SetMode(git_status)"
context = "Git && mode == git_filter"

# Diff Review Mode - Hunk-by-hunk review
[[bindings]]
key = "escape"
action = "SetKeyContext(TextEditor)"
context = "DiffReview"

[[bindings]]
key = "j"
action = "DiffReviewNextHunk"
context = "DiffReview"

[[bindings]]
key = "k"
action = "DiffReviewPrevHunk"
context = "DiffReview"

[[bindings]]
key = "down"
action = "DiffReviewNextHunk"
context = "DiffReview"

[[bindings]]
key = "up"
action = "DiffReviewPrevHunk"
context = "DiffReview"

[[bindings]]
key = "ctrl-n"
action = "DiffReviewNextHunk"
context = "DiffReview"

[[bindings]]
key = "ctrl-p"
action = "DiffReviewPrevHunk"
context = "DiffReview"

[[bindings]]
key = "space"
action = "DiffReviewApproveHunk"
context = "DiffReview"

[[bindings]]
key = "a"
action = "DiffReviewApproveHunk"
context = "DiffReview"

[[bindings]]
key = "enter"
action = "DiffReviewApproveHunk"
context = "DiffReview"

[[bindings]]
key = "t"
action = "DiffReviewToggleApproval"
context = "DiffReview"

[[bindings]]
key = "n"
action = "DiffReviewNextUnreviewedHunk"
context = "DiffReview"

[[bindings]]
key = "R"
action = "DiffReviewResetProgress"
context = "DiffReview"

[[bindings]]
key = "?"
action = "OpenHelpOverlay"
context = "DiffReview"

[[bindings]]
key = ": q"
action = "DiffReviewDismiss"
context = "DiffReview"

[[bindings]]
key = "c"
action = "DiffReviewCycleComparisonMode"
context = "DiffReview"

# Help - Context-sensitive help system
[[bindings]]
key = "?"
action = "OpenHelpOverlay"
context = "TextEditor && mode == normal"

# Help Modal Mode - Full help reference
[[bindings]]
key = "escape"
action = "SetKeyContext(TextEditor)"
context = "HelpModal"

# About Modal Mode - Version and build info
[[bindings]]
key = "escape"
action = "SetKeyContext(TextEditor)"
context = "AboutModal"
